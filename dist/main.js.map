{"version":3,"sources":["../src/main.js"],"names":["isMobile","window","orientation","navigator","userAgent","indexOf","animationEffects","levelFinishMessage","headerElem","levelTitleElem","footerElem","statusElem","levelFinishDialogElem","levelFinishMessageElem","levelFinishStarsElems","levelfinishMoveCountElem","noMoreLevelsElem","playAgainElem","gotoNextLevelElem","moreLevelsElem","nextLevelElem","prevLevelElem","reloadLevelElem","menuElem","aboutDialogElem","animationEffectElem","howToPlayDialogElem","howToPlayElem","game","document","addEventListener","event","getElementById","getElementsByClassName","svgGameElem","rect","getBoundingClientRect","Game","textContent","moveAnimation","e","style","opacity","classList","add","nextLevel","preventDefault","click","prevLevel","reloadLevel","display","stopPropagation","target","localStorage","setItem","x","pageX","left","y","pageY","top","startDrag","changedTouches","onDrag","endDrag","remove","levelNumber","highestFinishedLevel","DEBUG"],"mappings":"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","file":"main.js","sourcesContent":["var isMobile = ((typeof window.orientation !== \"undefined\") || (navigator.userAgent.indexOf('IEMobile') !== -1));\r\n\r\nvar animationEffects = [\"Instant\", \"Fast\", \"Bounce\"];\r\nvar levelFinishMessage = [\"You can do better\", \"Pretty good\", \"True genius!\"]; // 1 - 3 stars\r\n\r\nvar headerElem, levelTitleElem, footerElem, statusElem;\r\nvar levelFinishDialogElem, levelFinishMessageElem, levelFinishStarsElems, levelfinishMoveCountElem,\r\n  noMoreLevelsElem, playAgainElem, gotoNextLevelElem, moreLevelsElem;\r\nvar nextLevelElem, prevLevelElem, reloadLevelElem, menuElem, aboutDialogElem, animationEffectElem,\r\n  howToPlayDialogElem, howToPlayElem;\r\n\r\nvar game;\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", function(event) {\r\n\r\n  headerElem = document.getElementById(\"header\");\r\n  levelTitleElem = document.getElementById(\"level-title\");\r\n  footerElem = document.getElementById(\"footer\");\r\n  statusElem = document.getElementById(\"status\");\r\n\r\n  levelFinishDialogElem = document.getElementById(\"level-finish-dialog\");\r\n  levelFinishMessageElem = document.getElementById(\"level-finish-message\");\r\n  levelFinishStarsElems = document.getElementsByClassName('level-finish-level-star');\r\n  levelfinishMoveCountElem = document.getElementById('level-finish-move-count');\r\n  noMoreLevelsElem = document.getElementById('no-more-levels');\r\n  playAgainElem = document.getElementById('play-again');\r\n  gotoNextLevelElem = document.getElementById('goto-next-level');\r\n  moreLevelsElem = document.getElementById('more-levels');\r\n\r\n  nextLevelElem = document.getElementById(\"next-level\");\r\n  prevLevelElem = document.getElementById(\"prev-level\");\r\n  reloadLevelElem = document.getElementById(\"reload-level\");\r\n  menuElem = document.getElementById(\"menu\");\r\n  aboutDialogElem = document.getElementById(\"about-dialog\");\r\n  animationEffectElem = document.getElementById(\"animation-effect\");\r\n  howToPlayDialogElem = document.getElementById(\"how-to-play-dialog\");\r\n  howToPlayElem = document.getElementById(\"how-to-play\");\r\n\r\n  let svgGameElem = document.getElementById(\"game\");\r\n  let rect = svgGameElem.getBoundingClientRect();\r\n\r\n  game = new Game(svgGameElem);\r\n\r\n  animationEffectElem.textContent = animationEffects[game.moveAnimation];\r\n\r\n  nextLevelElem.addEventListener(\"click\", function(e) {\r\n    if (nextLevelElem.style.opacity != 1)\r\n      return;\r\n    nextLevelElem.classList.add(\"bounce-right\");\r\n    game.nextLevel();\r\n  });\r\n\r\n  gotoNextLevelElem.addEventListener(\"click\", function(e) {\r\n    e.preventDefault();\r\n    nextLevelElem.click();\r\n  });\r\n\r\n  prevLevelElem.addEventListener(\"click\", function(e) {\r\n    if (prevLevelElem.style.opacity != 1)\r\n      return;\r\n    prevLevelElem.classList.add(\"bounce-left\");\r\n    game.prevLevel();\r\n  });\r\n\r\n  reloadLevelElem.addEventListener(\"click\", function(e) {\r\n    reloadLevelElem.classList.add(\"rotate-reload\");\r\n    game.reloadLevel();\r\n  });\r\n\r\n  playAgainElem.addEventListener(\"click\", function(e) {\r\n    e.preventDefault();\r\n    reloadLevelElem.click();\r\n  });\r\n\r\n  menuElem.addEventListener(\"click\", function(e) {\r\n    aboutDialogElem.style.display = (aboutDialogElem.style.display === \"block\") ? \"none\" : \"block\";\r\n  });\r\n\r\n  aboutDialogElem.addEventListener(\"click\", function(e) {\r\n    e.stopPropagation();\r\n  });\r\n\r\n  document.addEventListener(\"click\", function(e) {\r\n    if (aboutDialogElem.style.display === \"block\" && e.target !== menuElem)\r\n      aboutDialogElem.style.display = \"none\";\r\n\r\n    if (howToPlayDialogElem.style.display === \"block\")\r\n      howToPlayDialogElem.style.display = \"none\";\r\n  });\r\n\r\n  animationEffectElem.addEventListener(\"click\", function(e) {\r\n    e.preventDefault();\r\n\r\n    if (game.moveAnimation === 2)\r\n      game.moveAnimation = 0;\r\n    else\r\n      game.moveAnimation++;\r\n\r\n    animationEffectElem.textContent = animationEffects[game.moveAnimation];\r\n    localStorage.setItem(\"moveAnimation\", game.moveAnimation);\r\n  });\r\n  \r\n  howToPlayElem.addEventListener(\"click\", function(e) {\r\n    e.preventDefault();\r\n\r\n    aboutDialogElem.style.display = \"none\";\r\n    howToPlayDialogElem.style.display = \"block\";\r\n  });\r\n\r\n  /*\r\n    Listen to start move events\r\n  */\r\n  svgGameElem.addEventListener(\"mousedown\", function(e) {\r\n    rect = svgGameElem.getBoundingClientRect();\r\n    let x = e.pageX - rect.left;\r\n    let y = e.pageY - rect.top;\r\n\r\n    game.startDrag(x, y);\r\n  });\r\n\r\n  svgGameElem.addEventListener(\"touchstart\", function(e) {\r\n    if (aboutDialogElem.style.display !== \"block\")\r\n      e.preventDefault();\r\n\r\n    rect = svgGameElem.getBoundingClientRect();\r\n    let x = e.changedTouches[0].pageX - rect.left;\r\n    let y = e.changedTouches[0].pageY - rect.top;\r\n\r\n    game.startDrag(x, y);\r\n  });\r\n\r\n  /*\r\n    Listen to move events\r\n  */\r\n  svgGameElem.addEventListener(\"mousemove\", function(e) {\r\n    let x = e.pageX - rect.left;\r\n    let y = e.pageY - rect.top;\r\n\r\n    game.onDrag(x, y);\r\n  });\r\n\r\n  svgGameElem.addEventListener(\"touchmove\", function(e) {\r\n    e.preventDefault();\r\n\r\n    let x = e.changedTouches[0].pageX - rect.left;\r\n    let y = e.changedTouches[0].pageY - rect.top;\r\n\r\n    game.onDrag(x, y);\r\n  });\r\n\r\n  document.addEventListener(\"touchmove\", function(e) {\r\n    e.preventDefault();  // Prevent body scroll on iOS\r\n  });\r\n\r\n  /*\r\n    Detect end drag event everywhere on screen\r\n  */\r\n  document.addEventListener(\"mouseup\", function(e) {\r\n    game.endDrag();\r\n  });\r\n\r\n  document.addEventListener(\"touchend\", function(e) {\r\n    game.endDrag();\r\n  });\r\n\r\n  /*\r\n    Listen to CSS animations events\r\n  */\r\n  nextLevelElem.addEventListener(\"animationend\", function(e) {\r\n    nextLevelElem.classList.remove(\"bounce-right\");\r\n    if (game.levelNumber === game.highestFinishedLevel && !DEBUG)\r\n      nextLevelElem.style.opacity = 0;\r\n  });\r\n\r\n  prevLevelElem.addEventListener(\"animationend\", function(e) {\r\n    prevLevelElem.classList.remove(\"bounce-left\");\r\n    if (game.levelNumber === 0  && !DEBUG)\r\n      prevLevelElem.style.opacity = 0;\r\n  });\r\n\r\n  reloadLevelElem.addEventListener(\"animationend\", function(e) {\r\n    reloadLevelElem.classList.remove(\"rotate-reload\");\r\n  });\r\n\r\n});\r\n"]}